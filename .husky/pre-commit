#!/usr/bin/env sh
set -e
. "$(dirname -- "$0")/_/husky.sh"

echo "Hello Learn ReactJs For Tai Dev"

# Run lint-staged or other pre-commit tasks
npm run lint-staged

# Infomation for me success or error
echo "---- Oh my good prefetch ðŸ”¥ ----"

# Get the commit message from the latest commit
COMMIT_MESSAGE=$(git log -1 --pretty=%B)

# Check if the commit message contains the word "feat" and the environment variable is not set
if echo "$COMMIT_MESSAGE" | grep -qiE "(feat|feature)" && [ -z "$VERSION_BUMPED" ]; then
  export VERSION_BUMPED=true
  # Run standard-version to bump the version
  npx standard-version
fi

# Push to remote repository (origin) on successful commit
git push origin HEAD

